error:
… from call site

  at ./default.nix:107:40:

   106|
   107|   kotatogram-desktop-with-patched-qt = desktop-app.with-patched-qt kotatogram-desktop;
      |                                        ^
   108|

… while calling 'with-patched-qt'

  at ./default.nix:76:23:

    75|
    76|     with-patched-qt = drv: (lib.foldr ({ oldDependency, newDependency }: drv:
      |                       ^
    77|       replaceDependency { inherit oldDependency newDependency drv; }

… from call site

  at ./default.nix:76:29:

    75|
    76|     with-patched-qt = drv: (lib.foldr ({ oldDependency, newDependency }: drv:
      |                             ^
    77|       replaceDependency { inherit oldDependency newDependency drv; }

… while calling 'foldr'

  at <nixpkgs> + /lib/lists.nix:121:20:

   120|   */
   121|   foldr = op: nul: list:
      |                    ^
   122|     let

… from call site

  at <nixpkgs> + /lib/lists.nix:128:8:

   127|         else op (elemAt list n) (fold' (n + 1));
   128|     in fold' 0;
      |        ^
   129|

… while calling 'fold''

  at <nixpkgs> + /lib/lists.nix:124:15:

   123|       len = length list;
   124|       fold' = n:
      |               ^
   125|         if n == len

… from call site

  at <nixpkgs> + /lib/lists.nix:127:14:

   126|         then nul
   127|         else op (elemAt list n) (fold' (n + 1));
      |              ^
   128|     in fold' 0;

… while calling anonymous lambda

  at ./default.nix:76:74:

    75|
    76|     with-patched-qt = drv: (lib.foldr ({ oldDependency, newDependency }: drv:
      |                                                                          ^
    77|       replaceDependency { inherit oldDependency newDependency drv; }

… from call site

  at <nixpkgs> + /lib/trivial.nix:955:7:

   954|     { # TODO: Should we add call-time "type" checking like built in?
   955|       __functor = self: f;
      |       ^
   956|       __functionArgs = args;

… while calling anonymous lambda

  at <nixpkgs> + /pkgs/build-support/replace-dependency.nix:20:1:

    19| # (and all of its dependencies) without rebuilding further.
    20| { drv, oldDependency, newDependency, verbose ? true }:
      | ^
    21|

… while evaluating derivation 'references.nix'
  whose name attribute is located at <nixpkgs> + /pkgs/stdenv/generic/make-derivation.nix:334:7

… while evaluating attribute 'exportReferencesGraph' of derivation 'references.nix'

  at <nixpkgs> + /pkgs/build-support/replace-dependency.nix:37:59:

    36|   warn = if verbose then builtins.trace else (x: y: y);
    37|   references = import (runCommandLocal "references.nix" { exportReferencesGraph = [ "graph" drv ]; } ''
      |                                                           ^
    38|     (echo {

… from call site

  at <nixpkgs> + /lib/lists.nix:127:34:

   126|         then nul
   127|         else op (elemAt list n) (fold' (n + 1));
      |                                  ^
   128|     in fold' 0;

… while calling 'fold''

  at <nixpkgs> + /lib/lists.nix:124:15:

   123|       len = length list;
   124|       fold' = n:
      |               ^
   125|         if n == len

… from call site

  at <nixpkgs> + /lib/lists.nix:127:14:

   126|         then nul
   127|         else op (elemAt list n) (fold' (n + 1));
      |              ^
   128|     in fold' 0;

… while calling anonymous lambda

  at ./default.nix:76:74:

    75|
    76|     with-patched-qt = drv: (lib.foldr ({ oldDependency, newDependency }: drv:
      |                                                                          ^
    77|       replaceDependency { inherit oldDependency newDependency drv; }

… from call site

  at <nixpkgs> + /lib/trivial.nix:955:7:

   954|     { # TODO: Should we add call-time "type" checking like built in?
   955|       __functor = self: f;
      |       ^
   956|       __functionArgs = args;

… while calling anonymous lambda

  at <nixpkgs> + /pkgs/build-support/replace-dependency.nix:20:1:

    19| # (and all of its dependencies) without rebuilding further.
    20| { drv, oldDependency, newDependency, verbose ? true }:
      | ^
    21|

… from call site

  at <nixpkgs> + /pkgs/build-support/replace-dependency.nix:93:77:

    92|   drvHash = discard (toString drv);
    93| in assert (stringLength (drvName (toString oldDependency)) == stringLength (drvName (toString newDependency)));
      |                                                                             ^
    94| rewriteMemo.${drvHash} or (warn "replace-dependency.nix: Derivation ${drvHash} does not depend on ${discard (toString oldDependency)}" drv)

… while calling 'drvName'

  at <nixpkgs> + /pkgs/build-support/replace-dependency.nix:72:13:

    71|
    72|   drvName = drv:
      |             ^
    73|     discard (substring 33 (stringLength (builtins.baseNameOf drv)) (builtins.baseNameOf drv));

… while evaluating derivation 'qtwayland-6.7.2'
  whose name attribute is located at <nixpkgs> + /pkgs/stdenv/generic/make-derivation.nix:334:7

… while evaluating attribute 'propagatedBuildInputs' of derivation 'qtwayland-6.7.2'

  at <nixpkgs> + /pkgs/stdenv/generic/make-derivation.nix:388:7:

   387|       depsHostHostPropagated      = elemAt (elemAt propagatedDependencies 1) 0;
   388|       propagatedBuildInputs       = elemAt (elemAt propagatedDependencies 1) 1;
      |       ^
   389|       depsTargetTargetPropagated  = elemAt (elemAt propagatedDependencies 2) 0;

… while calling anonymous lambda

  at <nixpkgs> + /pkgs/stdenv/generic/make-derivation.nix:324:13:

   323|       (map (drv: getDev drv.__spliced.hostHost or drv) (checkDependencyList "depsHostHostPropagated" depsHostHostPropagated))
   324|       (map (drv: getDev drv.__spliced.hostTarget or drv) (checkDependencyList "propagatedBuildInputs" propagatedBuildInputs))
      |             ^
   325|     ]

… from call site

  at <nixpkgs> + /pkgs/stdenv/generic/make-derivation.nix:324:18:

   323|       (map (drv: getDev drv.__spliced.hostHost or drv) (checkDependencyList "depsHostHostPropagated" depsHostHostPropagated))
   324|       (map (drv: getDev drv.__spliced.hostTarget or drv) (checkDependencyList "propagatedBuildInputs" propagatedBuildInputs))
      |                  ^
   325|     ]

… while calling 'getOutput'

  at <nixpkgs> + /lib/attrsets.nix:1796:23:

  1795|   */
  1796|   getOutput = output: pkg:
      |                       ^
  1797|     if ! pkg ? outputSpecified || ! pkg.outputSpecified

… while calling anonymous lambda

  at <nixpkgs> + /lib/lists.nix:334:29:

   333|   */
   334|   imap1 = f: list: genList (n: f (n + 1) (elemAt list n)) (length list);
      |                             ^
   335|

… from call site

  at <nixpkgs> + /lib/lists.nix:334:32:

   333|   */
   334|   imap1 = f: list: genList (n: f (n + 1) (elemAt list n)) (length list);
      |                                ^
   335|

… while calling anonymous lambda

  at <nixpkgs> + /pkgs/stdenv/generic/make-derivation.nix:279:15:

   278|     imap1
   279|       (index: dep:
      |               ^
   280|         if isDerivation dep || dep == null || builtins.isString dep || builtins.isPath dep then dep

… from call site

  at <nixpkgs> + /pkgs/stdenv/generic/make-derivation.nix:280:12:

   279|       (index: dep:
   280|         if isDerivation dep || dep == null || builtins.isString dep || builtins.isPath dep then dep
      |            ^
   281|         else if isList dep then checkDependencyList' ([index] ++ positions) name dep

… while calling 'isDerivation'

  at <nixpkgs> + /lib/attrsets.nix:1283:5:

  1282|   isDerivation =
  1283|     value: value.type or null == "derivation";
      |     ^
  1284|

… from call site

  at <nixpkgs> + /lib/trivial.nix:955:7:

   954|     { # TODO: Should we add call-time "type" checking like built in?
   955|       __functor = self: f;
      |       ^
   956|       __functionArgs = args;

… while calling anonymous lambda

  at <nixpkgs> + /pkgs/build-support/replace-dependency.nix:20:1:

    19| # (and all of its dependencies) without rebuilding further.
    20| { drv, oldDependency, newDependency, verbose ? true }:
      | ^
    21|

error: path '/nix/store/wfdrs7k1waqk1jlwiil371lj3446v310-references.nix.drv' is not valid
